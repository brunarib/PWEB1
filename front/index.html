<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
        <header class="container">
            <a class="inicial" href="index.html">
                <img src="/images/home.png" alt="Pagina Incial">
            </a>
            <h1>Trabalho de Prog Web 1</h1>
            <div class="group-conta-carrinho">
                
                <a class="minha-conta" href="pagina-minha-conta.html" >
                    Minha Conta </a>
                <a href="#" class="user-container">
                    <img src="images/user-image.png" alt="">
                </a>
                <a href="page-cart.html" class="cart-container">
                    <img src="images/cart.png" alt="">
                    <div class="cart__itens">
                        1
                    </div>
                </a>
            </div>
        </header>
    <div class="content-wrapper">
        <section class="forms container">
            <div class="form form--login"> <!-- Para adicionar o loader basta por a classe is-loading na linha 4 -->
                <div class="form__content">
                    <h2>Login</h2>
                    <form action="#">
                        <div class="form__input">
                            <label for="email">E-mail</label>
                            <input id="email" type="text">
                            <span>O campo é obrigatório</span>
                        </div>
        
                        <div class="form__input">
                            <label for="password">Senha</label>
                            <div class="form__input__password">
                                <input id="password" type="password">
                                <i class="far fa-eye"></i>
                            </div>
                            <span>O campo é obrigatório</span>
                        </div>
        
                        <div class="form__checkbox">
                            <input id="session" type="checkbox">
                            <label for="session">Lembrar minha conta</label>
                        </div>
        
                        <div class="form__actions">
                            <a href="#">esqueci a senha</a>
                            <input type="submit" value="entrar">
                        </div>
                    </form>
                 </div>
            </div>
            <div class="form form--register"> <!-- Para adicionar o loader basta por a classe is-loading na linha 4 -->
                <div class="form__content">
                    <h2>Cadastro</h2>
                    <p class="form__texts">Preencha o formulário abaixo para solicitar a criação da sua conta.</p>
                    <form action="#">
                            <div class="form__line">
                                <div class="form__input">
                                    <label for="name">Nome completo</label>
                                    <input id="name" type="text">
                                    <span>O campo é obrigatório</span>
                                </div>
                                <div class="form__input">
                                    <label for="emailregister">E-mail</label>
                                    <input id="emailregister" type="email">
                                    <span>O campo é obrigatório</span>
                                </div>
                                <div class="form__input">
                                    <label for="passwordregister">Digite sua senha</label>
                                    <input id="passwordregister" type="password">
                                    <span>O campo é obrigatório</span>
                                </div>
                            </div>
        
                        <div class="form__checkbox">
                            <input id="lgpd" type="checkbox">
                            <label for="lgpd">Li e concordo com os <a href="#">Termos de Uso</a> e <a href="#">Política de Privacidade.</a></label>
                        </div>
        
                        <div class="form__actions">
                            <input type="submit" value="criar conta">
                        </div>
                    </form>
                 </div>
            </div>
            <div class="loader">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; display: block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                    <circle cx="50" cy="50" r="0" fill="none" stroke="#121b7c" stroke-width="2">
                        <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"></animate>
                        <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"></animate>
                    </circle><circle cx="50" cy="50" r="0" fill="none" stroke="#061b78" stroke-width="2">
                        <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.5s"></animate>
                        <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.5s"></animate>
                    </circle>
                </svg>
            </div>
        </section>

        <section class="product-listing container">
            <div class="listing-item">
                <div class="item-content">
                    <div class="info">
                        <div class="content__categorie">
                            <small>Artes</small>    
                        </div>
                        <div class="content__title">
                            <h3>Fotografia Digital com câmera compacta</h3>
                        </div>
                        <div class="content__description">
                            <p>
                                In in elementum ipsum turpis fermentum cras vestibulum, proin vel. 
                                Eget sed natoque adipiscing dolor, id. 
                                Risus tortor enim ornare gravida faucibus libero quisque tellus ullamcorper.
                            </p>
                        </div>
                    </div>
                    <div class="item-prices">
                        <div class="prices-payment">
                            <div class="payment__installment">
                                Até 2x de 
                                <div class="installment__value">
                                    R$ 65,00
                                </div> 
                            </div>
                            <div class="prices__total">
                                Total: R$ 130,00
                            </div>
                        </div>
                        <a href="#" class="prices__button">
                            comprar
                        </a>
                    </div>
                </div>
            </div>
            <div class="listing-item">
                <div class="item-content">
                    <div class="info">
                        <div class="content__categorie">
                            <small>Artes</small>    
                        </div>
                        <div class="content__title">
                            <h3>Fotografia Digital com câmera compacta</h3>
                        </div>
                        <div class="content__description">
                            <p>
                                In in elementum ipsum turpis fermentum cras vestibulum, proin vel. 
                                Eget sed natoque adipiscing dolor, id. 
                                Risus tortor enim ornare gravida faucibus libero quisque tellus ullamcorper.
                            </p>
                        </div>
                    </div>
                    <div class="item-prices">
                        <div class="prices-payment">
                            <div class="payment__installment">
                                Até 2x de 
                                <div class="installment__value">
                                    R$ 65,00
                                </div> 
                            </div>
                            <div class="prices__total">
                                Total: R$ 130,00
                            </div>
                        </div>
                        <a href="#" class="prices__button">
                            comprar
                        </a>
                    </div>
                </div>
            </div>
            <div class="listing-item">
                <div class="item-content">
                    <div class="info">
                        <div class="content__categorie">
                            <small>Artes</small>    
                        </div>
                        <div class="content__title">
                            <h3>Fotografia Digital com câmera compacta</h3>
                        </div>
                        <div class="content__description">
                            <p>
                                In in elementum ipsum turpis fermentum cras vestibulum, proin vel. 
                                Eget sed natoque adipiscing dolor, id. 
                                Risus tortor enim ornare gravida faucibus libero quisque tellus ullamcorper.
                            </p>
                        </div>
                    </div>
                    <div class="item-prices">
                        <div class="prices-payment">
                            <div class="payment__installment">
                                Até 2x de 
                                <div class="installment__value">
                                    R$ 65,00
                                </div> 
                            </div>
                            <div class="prices__total">
                                Total: R$ 130,00
                            </div>
                        </div>
                        <a href="#" class="prices__button">
                            comprar
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </div>
<script src="js/main.js"></script>
<script>
    var requestOptions = {
  method: 'GET',
  redirect: 'follow',
  mode:'no-cors'
};

fetch("http://localhost:8181/produtos", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));

    var token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0ZXN0ZSIsImV4cCI6MTYyODIwNjA2OX0.TaZYdi60iDsCmEu2kmR53z-9U1TOxBbXqQ9Ln_kmuQZCtAxUOpCag3ounQSF4_OXlOzNP5_xaHhYxMdREo-ubw';
    function parseJwt (token) {
    var base64Url = token.split('.')[1];
    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    return JSON.parse(jsonPayload);
};

    console.log(parseJwt(token));
    console.log(parseToken());




  function parseToken(){

var myHeaders = new Headers
myHeaders.append("Content-Type", "plain/text");
myHeaders.append( "Accept", 'application/json');
myHeaders = myHeaders.append

var raw = JSON.stringify({
  "login": "bruna",
  "senha": "1234"
});

var requestOptions = {
  method: 'POST',
  headers: myHeaders,
  body: raw,
  redirect: 'follow'
};

 return fetch("http://localhost:8181/login", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));


  } 

  var myHeaders = new Headers();
myHeaders.append("Authorization", "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJzdHJpbmciLCJleHAiOjE2MjgyMTAwMjZ9.kiaKnEzGuRryU9otqAFkgu0nI3C1bg84TqMAnx6fHSOyF1T_rJk80JKRAJNjhJwi5tb33Jw_PnNOOjkTvsuFFg");

var requestOptions = {
  method: 'GET',
  headers: myHeaders,
  redirect: 'follow'
};

fetch("http://localhost:8181/clientes/listarTodos", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));

</script>
</body>
</html>