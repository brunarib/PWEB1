"use strict";var categoria={id:null,descricao:null},categorias=[],requestGet={method:"GET",redirect:"follow"},jsonData="",getUrlCategoria="http://localhost:8181/categorias";function cadastrarCategoria(){event.preventDefault();var e=document.getElementById("category").value,t=localStorage.getItem("TOKEN-SESSION"),o=JSON.stringify({descricao:e}),e=new XMLHttpRequest;e.open("POST","http://localhost:8181/categorias/categoriaCadastro",!0),e.setRequestHeader("Authorization","Bearer "+t),e.setRequestHeader("Content-type","application/json"),e.send(o),e.onload=function(){alert("Categoria Cadastrada!")}}function listarCategorias(){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","http://localhost:8181/categorias",!0),t.onload=function(){var e=JSON.parse(t.responseText);console.log(e);var l=document.querySelector(".tableCategoria"),i=document.querySelector(".rowItem");e.forEach(function(e,t){var o=i.cloneNode(!0),n=o.querySelector(".rowNumber"),a=o.querySelector(".categoriaId"),r=o.querySelector(".descricao");n.innerHTML=t,a.innerHTML=e.categoriaId,r.innerHTML=e.descricao,o.appendChild(delButton()),l.appendChild(o)})},t.send(null),console.log(jsonData)}window.location.href,listarCategorias();var delButton=function(){var e=document.createElement("button");return e.classList.add("button-remove"),e.innerText="X",e.addEventListener("click",delLi),e},delLi=function(e){e=e.target;return e.parentElement.remove(),e};function createProduct(){event.preventDefault();registerPost("http://localhost:8181/produtos/produtoCadastro",{categorias:[{categoriaId:document.getElementById("id-categoria-produto").value,descricao:document.getElementById("").value}],descricaoProduto:document.getElementById("nome-produto").value,preco:document.getElementById("preco-produto").value,quantidadeEstoque:document.getElementById("quantidade-produto").value}),alert("Produto Cadastrado!")}function getcategoriaProduto(){console.log("Pegou categoria");var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","http://localhost:8181/categorias",!0),t.onload=function(){var e=Json.parse(t.responseText);console.log(e);var a=document.querySelector("id-categoria-produto"),r=document.querySelector(".categoriaItem");e.forEach(function(e){var t=r.cloneNode(!0),o=t.querySelector(".id-categoria-produto"),n=t.querySelector(".nome-categoria-produto");o.innerHTML=e.categoriaId,n.innerHTML=e.descricao,a.appendChild(t)}),t.send(null),console.log(jsonData)}}getcategoriaProduto();var token="",formsView=document.querySelector(".forms"),logoutButton=document.getElementById("logout"),conta=document.getElementById("minha-conta"),userConta=document.getElementById("conta-user"),clienteId="",cliente={usuario:{id:null,nome:null,login:null,email:null,senha:null},endereco:null,id:null};function changeData(){var e=document.getElementById("nome-config"),t=document.getElementById("email-config"),o=document.getElementById("endereco-config"),n=document.getElementById("change-name").value,a=document.getElementById("change-email").value,r=document.getElementById("change-address").value;e.innerHTML="Nome: "+n,t.innerHTML="Email: "+a,o.innerHTML="Endereço: "+r;t=JSON.stringify({usuario:{id:cliente.usuario.id,nome:n,email:a},endereco:r,id:cliente.id}),o=localStorage.getItem("TOKEN-SESSION"),t=JSON.stringify({usuario:{id:cliente.usuario.id,nome:n,email:a},endereco:r,id:cliente.id});console.log("change"+t);r=new XMLHttpRequest;r.open("PUT","http://localhost:8181/clientes/editar",!1),r.setRequestHeader("Authorization","Bearer "+o),r.setRequestHeader("Content-Type","application/json"),r.send(t),console.log("change"+t)}localStorage.getItem("TOKEN-SESSION")&&(signIn(),"http://localhost:3000/pagina-minha-conta.html"!=window.location.href&&"http://localhost:3000/pagina-minha-conta-config.html"!=window.location.href&&"http://localhost:3000/index.html"!=window.location.href||userData());var openModal,modalClose,btnModal,containerModal,closeModal,logout=function(){token=""};function dataGet(e,t){var o=new XMLHttpRequest;return o.open("GET",e,!1),o.setRequestHeader("Authorization","Bearer "+t),o.send(),console.log(o.responseText),o.responseText}function userData(){var e=dataGet("http://localhost:8181/clientes/getCliente",localStorage.getItem("TOKEN-SESSION")),t=JSON.parse(e);console.log(t.usuario.adm),t.usuario.adm&&(conta.href="page-admin.html");var o=document.getElementById("login-config"),n=document.getElementById("nome-config"),a=document.getElementById("email-config"),e=document.getElementById("endereco-config");o.innerHTML="Login: "+t.usuario.login,n.innerHTML="Nome: "+t.usuario.nome,a.innerHTML="Email: "+t.usuario.email,e.innerHTML="Endereço: "+t.endereco,cliente.endereco=t.endereco,cliente.id=t.id,cliente.usuario.id=t.usuario.id,cliente.usuario.email=t.usuario.email,cliente.usuario.nome=t.usuario.nome,cliente.usuario.login=t.usuario.login,console.log(cliente)}function registerPost(e,t){var o=new XMLHttpRequest;return o.open("POST",e,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(t)),o.onload=function(){token=this.responseText,localStorage.setItem("TOKEN-SESSION",token)},o.responseText}function registerUser(){event.preventDefault();var e=document.getElementById("name-register").value,t=document.getElementById("login-register").value,o=document.getElementById("email-register").value,n=document.getElementById("password-register").value;registerPost("http://localhost:8181/clientes/usuarioCadastro",{endereco:document.getElementById("adress-register").value,usuario:{adm:"false",email:o,login:t,nome:e,senha:n}}),alert("Usuario Cadastrado!")}function loginUser(){event.preventDefault();var e=document.getElementById("login-user").value,t=document.getElementById("password-login").value;localStorage.setItem("LOGIN-SESSION",e),localStorage.setItem("SENHA-SESSION",t);t={login:e,senha:t};console.log(t),registerPost("http://localhost:8181/login",t),""!==token&&document.querySelector(".forms")&&(formsView.classList.add("form-disabled"),signIn(),window.location.reload(!0))}function signIn(){document.querySelector(".forms")&&formsView.classList.add("form-disabled"),conta.classList.add("is-active"),logoutButton.classList.add("is-active"),userConta.classList.add("is-active");var e=localStorage.getItem("LOGIN-SESSION");document.getElementById("user").innerHTML=e}function singOut(){localStorage.clear(),conta.classList.remove("is-active"),logoutButton.classList.remove("is-active"),userConta.classList.remove("is-active"),document.getElementById("user").innerHTML="",document.querySelector(".forms")&&formsView.classList.add("form-enable"),window.open("http://localhost:3000/index.html","_self")}function deleteCliente(){var e=localStorage.getItem("TOKEN-SESSION"),t="http://localhost:8181/clientes/deletar?"+new URLSearchParams({clienteId:cliente.id}).toString();console.log("id:"+clienteId),console.log(e);var o=new XMLHttpRequest;o.open("DELETE",t,!1),o.setRequestHeader("Authorization","Bearer "+e),o.send(),console.log(o.responseText)}document.querySelector(".button-modal")&&(openModal=function(){event.preventDefault(),containerModal.classList.add("is-active")},modalClose=function(){event.preventDefault(),containerModal.classList.remove("is-active")},btnModal=document.querySelector(".button-modal"),containerModal=document.querySelector('[data-modal="container"]'),closeModal=document.querySelector('[data-modal="close"]'),btnModal.addEventListener("click",openModal),closeModal.addEventListener("click",modalClose));