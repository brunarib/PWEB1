"use strict";var categoria={id:null,descricao:null},categorias=[],requestGet={method:"GET",redirect:"follow"},jsonData="",getUrlCategoria="http://localhost:8181/categorias";function cadastrarCategoria(){event.preventDefault();var e=document.getElementById("category").value,t=localStorage.getItem("TOKEN-SESSION"),o=JSON.stringify({descricao:e}),e=new XMLHttpRequest;e.open("POST","http://localhost:8181/categorias/categoriaCadastro",!0),e.setRequestHeader("Authorization","Bearer "+t),e.setRequestHeader("Content-type","application/json"),e.send(o),e.onload=function(){alert("Categoria Cadastrada!")}}function listarCategorias(){var a=new XMLHttpRequest;a.overrideMimeType("application/json"),a.open("GET","http://localhost:8181/categorias",!0),a.onload=function(){for(var e=JSON.parse(a.responseText),t=document.querySelector(".tableCategoria"),o=0;o<=e.length;o++){var n=document.querySelector(".rowItem");console.log(n);n=n.cloneNode(!0),n.querySelector(".rowNumber");n.appendChild(t)}},a.send(null),console.log(jsonData)}function registerUser(){event.preventDefault();var e=document.getElementById("name-register").value,t=document.getElementById("login-register").value,o=document.getElementById("email-register").value,n=document.getElementById("password-register").value;registerPost("http://localhost:8181/clientes/usuarioCadastro",{endereco:document.getElementById("adress-register").value,usuario:{adm:"false",email:o,login:t,nome:e,senha:n}}),alert("Usuario Cadastrado!")}function dataGet(e,t){var o=new XMLHttpRequest;return o.open("GET",e,!1),o.setRequestHeader("Authorization","Bearer "+t),o.send(),console.log(o.responseText),o.responseText}function changeData(){var e=document.getElementById("nome-config"),t=document.getElementById("email-config"),o=document.getElementById("endereco-config"),n=document.getElementById("change-name").value,a=document.getElementById("change-email").value,l=document.getElementById("change-address").value;e.innerHTML="Nome: "+n,t.innerHTML="Email: "+a,o.innerHTML="Endereço: "+l;t=JSON.stringify({usuario:{id:cliente.usuario.id,nome:n,email:a},endereco:l,id:cliente.id}),o=localStorage.getItem("TOKEN-SESSION"),t=JSON.stringify({usuario:{id:cliente.usuario.id,nome:n,email:a},endereco:l,id:cliente.id});console.log("change"+t);l=new XMLHttpRequest;l.open("PUT","http://localhost:8181/clientes/editar",!1),l.setRequestHeader("Authorization","Bearer "+o),l.setRequestHeader("Content-Type","application/json"),l.send(t),console.log("change"+t)}function deleteCliente(){var e=localStorage.getItem("TOKEN-SESSION"),t="http://localhost:8181/clientes/deletar?"+new URLSearchParams({clienteId:cliente.id}).toString();console.log("id:"+clienteId),console.log(e);var o=new XMLHttpRequest;o.open("DELETE",t,!1),o.setRequestHeader("Authorization","Bearer "+e),o.send(),console.log(o.responseText)}window.location.href,listarCategorias();var token="",formsView=document.querySelector(".forms"),logoutButton=document.getElementById("logout"),conta=document.getElementById("minha-conta"),userConta=document.getElementById("conta-user"),clienteId="",cliente={usuario:{id:null,nome:null,login:null,email:null,senha:null},endereco:null,id:null};function changeData(){var e=document.getElementById("nome-config"),t=document.getElementById("email-config"),o=document.getElementById("endereco-config"),n=document.getElementById("change-name").value,a=document.getElementById("change-email").value,l=document.getElementById("change-address").value;e.innerHTML="Nome: "+n,t.innerHTML="Email: "+a,o.innerHTML="Endereço: "+l;e=JSON.stringify({usuario:{id:cliente.usuario.id,nome:n,email:a},endereco:l,id:cliente.id}),t=localStorage.getItem("TOKEN-SESSION"),o="http://localhost:8181/clientes/editar",e=JSON.stringify({usuario:{id:cliente.usuario.id,nome:n,email:a},endereco:l,id:cliente.id});console.log("change"+e);l=new XMLHttpRequest;l.open("PUT",o,!1),l.setRequestHeader("Authorization","Bearer "+t),l.setRequestHeader("Content-Type","application/json"),l.send(e),console.log("change"+e)}localStorage.getItem("TOKEN-SESSION")&&(signIn(),"http://localhost:3000/pagina-minha-conta.html"!=window.location.href&&"http://localhost:3000/pagina-minha-conta-config.html"!=window.location.href&&"http://localhost:3000/index.html"!=window.location.href||userData());var openModal,modalClose,btnModal,containerModal,closeModal,logout=function(){token=""};function dataGet(e,t){var o=new XMLHttpRequest;return o.open("GET",e,!1),o.setRequestHeader("Authorization","Bearer "+t),o.send(),console.log(o.responseText),o.responseText}function userData(){var e=localStorage.getItem("TOKEN-SESSION"),t=dataGet("http://localhost:8181/clientes/getCliente",e),o=JSON.parse(t);console.log(o.usuario.adm),o.usuario.adm&&(conta.href="page-admin.html");var n=document.getElementById("login-config"),a=document.getElementById("nome-config"),e=document.getElementById("email-config"),t=document.getElementById("endereco-config");n.innerHTML="Login: "+o.usuario.login,a.innerHTML="Nome: "+o.usuario.nome,e.innerHTML="Email: "+o.usuario.email,t.innerHTML="Endereço: "+o.endereco,cliente.endereco=o.endereco,cliente.id=o.id,cliente.usuario.id=o.usuario.id,cliente.usuario.email=o.usuario.email,cliente.usuario.nome=o.usuario.nome,cliente.usuario.login=o.usuario.login,console.log(cliente)}function registerPost(e,t){var o=new XMLHttpRequest;return o.open("POST",e,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(t)),o.onload=function(){token=this.responseText,localStorage.setItem("TOKEN-SESSION",token)},o.responseText}function registerUser(){event.preventDefault();var e="http://localhost:8181/clientes/usuarioCadastro",t=document.getElementById("name-register").value,o=document.getElementById("login-register").value,n=document.getElementById("email-register").value,a=document.getElementById("password-register").value;registerPost(e,{endereco:document.getElementById("adress-register").value,usuario:{adm:"false",email:n,login:o,nome:t,senha:a}}),alert("Usuario Cadastrado!")}function loginUser(){event.preventDefault();var e=document.getElementById("login-user").value,t=document.getElementById("password-login").value;localStorage.setItem("LOGIN-SESSION",e),localStorage.setItem("SENHA-SESSION",t);t={login:e,senha:t};console.log(t),registerPost("http://localhost:8181/login",t),""!==token&&document.querySelector(".forms")&&(formsView.classList.add("form-disabled"),signIn(),window.location.reload(!0))}function signIn(){document.querySelector(".forms")&&formsView.classList.add("form-disabled"),conta.classList.add("is-active"),logoutButton.classList.add("is-active"),userConta.classList.add("is-active");var e=localStorage.getItem("LOGIN-SESSION");document.getElementById("user").innerHTML=e}function singOut(){localStorage.clear(),conta.classList.remove("is-active"),logoutButton.classList.remove("is-active"),userConta.classList.remove("is-active"),document.getElementById("user").innerHTML="",document.querySelector(".forms")&&formsView.classList.add("form-enable"),window.open("http://localhost:3000/index.html","_self")}function deleteCliente(){var e=localStorage.getItem("TOKEN-SESSION"),t="http://localhost:8181/clientes/deletar?"+new URLSearchParams({clienteId:cliente.id}).toString();console.log("id:"+clienteId),console.log(e);var o=new XMLHttpRequest;o.open("DELETE",t,!1),o.setRequestHeader("Authorization","Bearer "+e),o.send(),console.log(o.responseText)}document.querySelector(".button-modal")&&(openModal=function(){event.preventDefault(),containerModal.classList.add("is-active")},modalClose=function(){event.preventDefault(),containerModal.classList.remove("is-active")},btnModal=document.querySelector(".button-modal"),containerModal=document.querySelector('[data-modal="container"]'),closeModal=document.querySelector('[data-modal="close"]'),btnModal.addEventListener("click",openModal),closeModal.addEventListener("click",modalClose));